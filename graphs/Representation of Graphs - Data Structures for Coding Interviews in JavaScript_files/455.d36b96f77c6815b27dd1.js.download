(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[455],{pLAI:function(e,t,a){"use strict";a.r(t);var n,s=a("HeVR"),c=a("RQNJ"),o=a("wHGx"),i=a("cZSR"),r=a("q2j6"),l=a("nO0O"),d=a("arbf"),p=a("guIr"),u=a("dTB1"),v=a("yZHS"),b=a.n(v),h=a("Dsxo"),j=a("2ue5"),f=a("98aK");function O(){return(O=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}var C,x,m=function(e){return v.createElement("svg",O({className:"thin-plus-icon",viewBox:"0 0 18.2 18.2"},e),n||(n=v.createElement("path",{d:"M9.1 0v18.2M0 9.1h18.2"})))},g=a("1kCS"),y=a("SaoS"),k=a("SP4F"),w=a("4j76"),S=a("FF6X"),I=a("09TK"),N=a("XCdf"),R=a("Rfo6"),_=a("LByC");function P(){return(P=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}var A=function(e){return v.createElement("svg",P({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-pause"},e),C||(C=v.createElement("rect",{x:6,y:4,width:4,height:16})),x||(x=v.createElement("rect",{x:14,y:4,width:4,height:16})))},D=a("zVml"),B=a("b2FJ"),L=a("Li79"),H=a("c9xx"),T=a("0Gbl"),E=a("doda"),q=a("oadT"),F=Object(I.c)(q.a).withConfig({displayName:"styles__SlidePreviewButton",componentId:"sc-8tvqhb-0"})([":active,:focus{outline:none;background:",";}.b-some-with-icon,.b-some-with-icon-icon,svg{:focus,:active{outline:none;}}"],N.colors.white),M=I.c.div.withConfig({displayName:"styles__ThumbnailStrip",componentId:"sc-8tvqhb-1"})(["display:flex;padding:10px 5px 5px 5px;overflow:auto;position:static;text-align:left;white-space:nowrap;width:100%;margin-bottom:5px;border-radius:",";"],h.q),V=I.c.a.withConfig({displayName:"styles__PlusButton",componentId:"sc-8tvqhb-2"})(["display:inline-block;cursor:pointer;cursor:hand;margin-left:15px;margin-right:15px;top:45px;position:relative;width:36px;height:36px;&:hover{border:none;padding-bottom:0px;}"]),W=I.c.div.withConfig({displayName:"styles__AnimationContainer",componentId:"sc-8tvqhb-3"})(["display:block;min-height:768px;"," .canvasContainer{display:block;}.fullscreenBtnWrapper{position:absolute;right:10px;top:13px;}.btnFullscreen{border:none;background:transparent;&:active,&:hover,&:focus{outline:none;background:transparent;box-shadow:none;}}&.fullscreen{position:fixed;top:0;bottom:0;left:0;right:0;z-index:500;padding-top:131px;.btnFullscreen{font-size:20px;}.canvasAnimationThumbnailStrip{position:absolute;top:0;}.canvasContainer{height:100%;overflow:auto;}}"],(function(e){return e.is_loading&&Object(I.b)(["filter:blur(1px);pointer-events:none;"])})),U=Object(I.b)(["margin-right:18px;:hover,:focus{box-shadow:0px 0px 12px ",";}"],N.colors.alphas.black2),z=function(e){var t=e.children;return Object(s.jsx)("div",{className:"border border-solid border-gray-300 dark:border-dark-60 dark:bg-white dark:text-black rounded mb-2.5",children:t})},J=I.c.div.withConfig({displayName:"styles__ButtonsWrap",componentId:"sc-8tvqhb-4"})(["display:flex;align-items:center;justify-content:center;margin-top:15px;"]),G=function(e){var t=e.children;return Object(s.jsx)("div",{className:"w-full text-right dark:bg-dark-90 pr-4 py-1.5",children:t})},X=Object(I.c)(q.a).attrs((function(){return{children:Object(s.jsx)(R.a,{className:"w-5 h-5","aria-label":"previous slide"}),circleButton:!0,style:{boxShadow:"0px 0px 9px ".concat(N.colors.alphas.black2)}}})).withConfig({displayName:"styles__Left",componentId:"sc-8tvqhb-5"})(["",";"],U),K=Object(I.c)(q.a).attrs((function(){return{children:Object(s.jsx)(_.a,{className:"w-5 h-5","aria-label":"next slide"}),circleButton:!0,style:{boxShadow:"0px 0px 9px ".concat(N.colors.alphas.black2)}}})).withConfig({displayName:"styles__Right",componentId:"sc-8tvqhb-6"})(["",";"],U),Z=Object(I.c)(q.a).attrs((function(){return{children:Object(s.jsx)(A,{className:"w-5 h-5","aria-label":"pause slide show"}),circleButton:!0,style:{boxShadow:"0px 0px 9px ".concat(N.colors.alphas.black2)}}})).withConfig({displayName:"styles__AnimationPause",componentId:"sc-8tvqhb-7"})(["",";"],U),Q=Object(I.c)(q.a).attrs((function(){return{children:Object(s.jsx)(D.a,{className:"w-5 h-5","aria-label":"start slide show"}),circleButton:!0,style:{boxShadow:"0px 0px 9px ".concat(N.colors.alphas.black2),padding:"10px 9px 10px 12px;"}}})).withConfig({displayName:"styles__AnimationPlay",componentId:"sc-8tvqhb-8"})(["",";"],U),Y=Object(I.c)(q.a).attrs((function(){return{children:Object(s.jsx)(B.a,{className:"w-5 h-5","aria-label":"got to first slide"}),circleButton:!0,style:{boxShadow:"0px 0px 9px ".concat(N.colors.alphas.black2)}}})).withConfig({displayName:"styles__Repeat",componentId:"sc-8tvqhb-9"})(["",";"],U),$=Object(I.c)(q.a).attrs((function(){return{children:Object(s.jsx)(L.a,{className:"w-5 h-5","aria-label":"view all slides"}),circleButton:!0,style:{boxShadow:"0px 0px 9px ".concat(N.colors.alphas.black2)}}})).withConfig({displayName:"styles__AnimationPlus",componentId:"sc-8tvqhb-10"})(["",";"],U),ee=Object(I.c)(q.a).attrs((function(){return{children:Object(s.jsx)(H.a,{className:"w-5 h-5","aria-label":"maximize"}),circleButton:!0,style:{boxShadow:"0px 0px 9px ".concat(N.colors.alphas.black2),padding:"10px"}}})).withConfig({displayName:"styles__AnimationMaximize",componentId:"sc-8tvqhb-11"})(["",";margin-right:0px;"],U),te=Object(I.c)(q.a).attrs((function(){return{children:Object(s.jsx)(T.a,{className:"w-5 h-5","aria-label":"minimize"}),circleButton:!0,style:{boxShadow:"0px 0px 9px ".concat(N.colors.alphas.black2),padding:"10px"}}})).withConfig({displayName:"styles__AnimationMinimize",componentId:"sc-8tvqhb-12"})(["",";margin-right:0px;"],U),ae=Object(I.c)(q.a).attrs((function(){return{children:Object(s.jsx)(E.a,{className:"w-5 h-5"}),circleButton:!0,style:{boxShadow:"0px 0px 9px ".concat(N.colors.alphas.black2)}}})).withConfig({displayName:"styles__AnimationMinus",componentId:"sc-8tvqhb-13"})(["",";"],U),ne=a("Bj94"),se=a.n(ne);function ce(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=Object(d.a)(e);if(t){var s=Object(d.a)(this).constructor;a=Reflect.construct(n,arguments,s)}else a=n.apply(this,arguments);return Object(l.a)(this,a)}}var oe=function(e){Object(r.a)(a,e);var t=ce(a);function a(e,n){var l;Object(c.a)(this,a),l=t.call(this,e,n),Object(p.a)(Object(o.a)(l),"keydownHandler",(function(e){e.keyCode===se.a.codes.right&&l.moveRight(e),e.keyCode===se.a.codes.left&&l.moveLeft(e)})),Object(p.a)(Object(o.a)(l),"moveLeft",(function(e){if(e&&e.stopPropagation(),l.stop(),l.state.selectedCanvas>0){var t=l.state.selectedCanvas-1;l.setState({selectedCanvas:t})}})),Object(p.a)(Object(o.a)(l),"moveRight",(function(e){if(e&&e.stopPropagation(),l.stop(),l.state.selectedCanvas<l.props.content.canvasObjects.length-1){var t=l.state.selectedCanvas+1;l.setState({selectedCanvas:t})}})),Object(p.a)(Object(o.a)(l),"reset",(function(e){e&&e.stopPropagation(),l.stop(),l.props.content.canvasObjects.length>0&&l.setState({selectedCanvas:0})})),Object(p.a)(Object(o.a)(l),"play",(function(e){e.stopPropagation(),l.setState({play:!0,timer:setInterval(l.moveRightTimed,1e3)})})),Object(p.a)(Object(o.a)(l),"moveRightTimed",(function(e){if(e&&e.stopPropagation(),clearInterval(l.state.timer),l.state.selectedCanvas<l.props.content.canvasObjects.length-1){var t=l.state.selectedCanvas+1;l.setState({selectedCanvas:t})}l.state.selectedCanvas<l.props.content.canvasObjects.length-1?l.setState({timer:setInterval(l.moveRightTimed,1e3)}):l.setState({play:!1})})),Object(p.a)(Object(o.a)(l),"stop",(function(e){e&&e.stopPropagation(),clearInterval(l.state.timer),!0===l.state.play&&l.setState({play:!1})})),Object(p.a)(Object(o.a)(l),"switchExpandedView",(function(e){e&&e.stopPropagation(),clearInterval(l.state.timer),!1===l.state.play?l.setState({expandedView:!l.state.expandedView}):l.setState({expandedView:!l.state.expandedView,play:!1})})),Object(p.a)(Object(o.a)(l),"closeModal",(function(){l.stop(),S.a.remove()})),Object(p.a)(Object(o.a)(l),"showCanvasAnimationInModal",(function(e){e&&e.stopPropagation(),l.stop();var t=Object(s.jsx)(a,{content:l.props.content,config:{displayFullScreen:!0}}),n=function(e){Object(r.a)(n,e);var a=ce(n);function n(){var e;Object(c.a)(this,n);for(var t=arguments.length,s=new Array(t),i=0;i<t;i++)s[i]=arguments[i];return e=a.call.apply(a,[this].concat(s)),Object(p.a)(Object(o.a)(e),"modalDgRef",b.a.createRef()),Object(p.a)(Object(o.a)(e),"open",(function(){var t,a,n,s,c,i;null===(t=Object(o.a)(e))||void 0===t||null===(a=t.modalDgRef)||void 0===a||null===(n=a.current)||void 0===n||null===(s=n.modalRef)||void 0===s||null===(c=s.current)||void 0===c||null===(i=c.open)||void 0===i||i.call(c)})),e}return Object(i.a)(n,[{key:"render",value:function(){return Object(s.jsx)(w.a,{ref:this.modalDgRef,children:t})}}]),n}(b.a.PureComponent);S.a.create(n,Object(o.a)(l))})),Object(p.a)(Object(o.a)(l),"renderAnimatedCanvas",(function(e,t,a,n,c){var o=null;if(null!=e&&0!==n){var i="canvasView".concat(t);o=Object(s.jsxs)(z,{children:[Object(s.jsx)(k.default,{mode:"view",content:e,config:a,onWidthChange:l.changeWidth,onHeightChange:l.changeHeight},t),n>1&&Object(s.jsx)(G,{children:Object(s.jsxs)("span",{className:"font-normal dark:text-dark-contrastText",children:[Object(s.jsx)("strong",{children:c+1})," of ",n]})})]},i)}else o=Object(s.jsxs)("p",{className:"text-center fg-darkgray50",children:[Object(s.jsx)("br",{}),Object(s.jsx)("br",{}),"No Canvas Added",Object(s.jsx)("br",{}),Object(s.jsx)("br",{})]});return Object(s.jsxs)("div",{className:"text-center ".concat(t===c?"block":"hidden"),children:[Object(s.jsx)("div",{style:{display:"block"},children:o}),n>1?Object(s.jsx)("div",{style:{textAlign:"center"},children:Object(s.jsxs)(J,{children:[Object(s.jsx)(X,{disabled:0===l.state.selectedCanvas,onClick:l.moveLeft}),Object(s.jsx)(K,{disabled:l.state.selectedCanvas===n-1,onClick:l.moveRight}),l.state.play?Object(s.jsx)(Z,{onClick:l.stop}):Object(s.jsx)(Q,{disabled:l.state.selectedCanvas===n-1,onClick:l.play}),Object(s.jsx)(Y,{disabled:0===l.state.selectedCanvas,onClick:l.reset}),Object(s.jsx)($,{onClick:l.switchExpandedView}),l.props.config&&l.props.config.displayFullScreen?Object(s.jsx)(te,{onClick:l.closeModal}):Object(s.jsx)(ee,{onClick:l.showCanvasAnimationInModal})]})}):null]},t)})),Object(p.a)(Object(o.a)(l),"renderExpandedCanvas",(function(e,t){var a=l.props.content.canvasObjects.map((function(t,a){var n=l.state.keys[a];return Object(s.jsxs)(z,{children:[Object(s.jsx)(k.default,{mode:"view",content:t,config:e,onWidthChange:l.changeWidth,onHeightChange:l.changeHeight},n),Object(s.jsx)(G,{children:Object(s.jsxs)("p",{className:"font-normal dark:text-dark-contrastText",children:[Object(s.jsx)("strong",{children:a+1})," of"," ",l.props.content.canvasObjects.length]})})]},n)}));return null==a&&(a=Object(s.jsxs)("p",{className:"text-center fg-darkgray50",children:[Object(s.jsx)("br",{}),Object(s.jsx)("br",{}),"No Canvas Added",Object(s.jsx)("br",{}),Object(s.jsx)("br",{})]})),Object(s.jsxs)("div",{style:{textAlign:"center"},children:[Object(s.jsx)("div",{style:{display:"block"},children:a}),Object(s.jsx)("div",{style:{textAlign:"center"},children:Object(s.jsxs)(J,{children:[Object(s.jsx)(ae,{onClick:l.switchExpandedView}),l.props.config&&l.props.config.displayFullScreen?Object(s.jsx)(te,{onClick:l.closeModal}):Object(s.jsx)(ee,{onClick:l.showCanvasAnimationInModal})]})})]})}));var d=Object(u.a)(Array(l.props.content.canvasObjects.length).keys());return l.state={keys:d,selectedCanvas:0,width:l.props.content.width,height:l.props.content.height,timer:null,expandedView:!1,play:!1},l}return Object(i.a)(a,[{key:"componentDidUpdate",value:function(e,t){var a,n;this.state.selectedCanvas!==t.selectedCanvas&&(null===(a=(n=this.props).selectedCanvasUpdatedTo)||void 0===a||a.call(n,this.state.selectedCanvas)),j.equals(e.content.canvasObjects,this.props.content.canvasObjects)||this.setState({keys:Object(u.a)(Array(this.props.content.canvasObjects.length).keys())})}},{key:"render",value:function(){var e=this,t={canvasInAnimation:!0},a=null!=this.props.content.canvasObjects?this.props.content.canvasObjects.length:0,n=null;return n=this.state.expandedView?this.renderExpandedCanvas(t,a):this.props.content.canvasObjects.map((function(n,s){return s>=e.state.selectedCanvas+5?null:e.renderAnimatedCanvas(n,e.state.keys[s],t,a,e.state.selectedCanvas)})),Object(s.jsx)("div",{style:{marginTop:30,marginBottom:30,outline:"none"},onFocus:function(){var t;return null===(t=document)||void 0===t?void 0:t.addEventListener("keydown",e.keydownHandler)},onBlur:function(){var t;return null===(t=document)||void 0===t?void 0:t.removeEventListener("keydown",e.keydownHandler)},tabIndex:0,children:n})}}]),a}(b.a.Component),ie=a("A3U0"),re=a("b8YG");function le(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function de(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?le(Object(a),!0).forEach((function(t){Object(p.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):le(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function pe(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=Object(d.a)(e);if(t){var s=Object(d.a)(this).constructor;a=Reflect.construct(n,arguments,s)}else a=n.apply(this,arguments);return Object(l.a)(this,a)}}var ue=function(e){Object(r.a)(a,e);var t=pe(a);function a(e,n){var s;return Object(c.a)(this,a),s=t.call(this,e,n),Object(p.a)(Object(o.a)(s),"canvasAnimationSvgPreviewRef",b.a.createRef()),Object(p.a)(Object(o.a)(s),"tabsContainerRef",b.a.createRef()),Object(p.a)(Object(o.a)(s),"onDuplicateClickHandler",(function(e){var t,a;e.stopPropagation(),e.preventDefault(),null===(t=(a=s.props).onDuplicate)||void 0===t||t.call(a,s.state.index)})),Object(p.a)(Object(o.a)(s),"onRemoveClickHandler",(function(e){var t,a;e.stopPropagation(),e.preventDefault(),null===(t=(a=s.props).onRemove)||void 0===t||t.call(a,s.state.index)})),Object(p.a)(Object(o.a)(s),"onSelectClickHandler",(function(e){var t,a;e.stopPropagation(),e.preventDefault(),null===(t=(a=s.props).onSelect)||void 0===t||t.call(a,s.state.index)})),s.state={index:e.index,svg:e.svg},s}return Object(i.a)(a,null,[{key:"getComponentDefault",value:function(){return{}}}]),Object(i.a)(a,[{key:"componentDidMount",value:function(){this.setSvgCSS()}},{key:"shouldComponentUpdate",value:function(e,t){return this.props.svg!==e.svg||this.props.selected!==e.selected}},{key:"componentDidUpdate",value:function(){this.setSvgCSS()}},{key:"setSvgCSS",value:function(){var e,t;""!==this.props.svg&&(null===(e=this.canvasAnimationSvgPreviewRef.current)||void 0===e||null===(t=e.lastChild)||void 0===t||t.setAttribute("style","width: 100%; height: 100%"))}},{key:"render",value:function(){var e={__html:this.props.svg},t=Object(s.jsx)("div",{ref:this.canvasAnimationSvgPreviewRef,style:{width:"100px",height:"80px",position:"relative"},dangerouslySetInnerHTML:e});return Object(s.jsxs)("span",{className:"canvas-animation-thumbnail","data-thumb-index":this.state.index,style:de({marginLeft:"5px",borderRadius:h.c},!0===this.props.selected?{border:"1px solid ".concat(N.colors.primary.DEFAULT)}:{}),onClick:this.onSelectClickHandler,children:[t,Object(s.jsxs)("div",{className:"text-center",style:{display:"block"},children:[Object(s.jsx)("h5",{className:"canvas-animation-thumbnail-text",children:Object(s.jsx)("span",{children:this.state.index+1})}),Object(s.jsx)(F,{className:"canvas-animation-action-button",onClick:this.onDuplicateClickHandler,children:Object(s.jsx)(y.a,{})}),!this.props.isOneCanvas&&Object(s.jsx)(F,{className:"canvas-animation-action-button",onClick:this.onRemoveClickHandler,children:Object(s.jsx)(g.a,{})})]})]})}}]),a}(b.a.Component),ve=function(e){Object(r.a)(a,e);var t=pe(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return e=t.call.apply(t,[this].concat(s)),Object(p.a)(Object(o.a)(e),"tabsContainerRef",b.a.createRef()),Object(p.a)(Object(o.a)(e),"moveThumbnails",(function(t,a){var n=e.tabsContainerRef.current.querySelectorAll(".canvas-animation-thumbnail"),s=Array.from(n).map((function(e){return parseInt(e.getAttribute("data-thumb-index"),10)})),c=[s[a.itemIndex],s[t.itemIndex]];s[t.itemIndex]=c[0],s[a.itemIndex]=c[1],e.props.reorderCanvas(s)})),e}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=this.props.canvasObjects.map((function(t,a){if(!t)return null;var n=Object(s.jsx)(ue,{index:a,svg:t.svg_string,selected:a===e.props.selectedCanvas,onSelect:e.props.selectCanvas,onRemove:e.props.removeCanvas,onDuplicate:e.props.duplicateCanvas,isOneCanvas:e.props.isOneCanvas},"th".concat(a));return Object(s.jsx)(f.a,{index:a,moveItem:e.moveThumbnails,ListItemJSX:n},"item_".concat(a))}));return Object(s.jsxs)(M,{ref:this.tabsContainerRef,className:"bg-gray-100 dark:bg-dark-90",children:[t,Object(s.jsx)(V,{onClick:this.props.addCanvas,children:Object(s.jsx)(m,{className:"!stroke-current text-black dark:text-dark-contrastText w-6 h-6"})})]})}}]),a}(b.a.Component),be=function(e){Object(r.a)(a,e);var t=pe(a);function a(e,n){var s,i,r;Object(c.a)(this,a),r=t.call(this,e,n),Object(p.a)(Object(o.a)(r),"canvasRef",b.a.createRef()),Object(p.a)(Object(o.a)(r),"bufferedCanvasContent",null),Object(p.a)(Object(o.a)(r),"addCanvas",(function(){var e=k.default.getComponentDefault();r.addCanvasObject(e)})),Object(p.a)(Object(o.a)(r),"changeHeight",(function(e){r.props.updateContentState((function(t){t.canvasObjects=r.cleanCanvasObjects(t),t.canvasObjects.forEach((function(t){return t.height=e})),t.height=e}))})),Object(p.a)(Object(o.a)(r),"changeWidth",(function(e){r.props.updateContentState((function(t){t.canvasObjects=r.cleanCanvasObjects(t),t.canvasObjects.forEach((function(t){return t.width=e})),t.width=e}))})),Object(p.a)(Object(o.a)(r),"duplicateCanvas",(function(e){r.saveCurrentCanvas();var t=r.props.content.canvasObjects[e];e===r.getSelectedCanvasIndex()&&null!=r.bufferedCanvasContent&&(t=r.bufferedCanvasContent),t=j.clone(t),r.addCanvasBase(t,!0,e)})),Object(p.a)(Object(o.a)(r),"removeCanvas",(function(e){var t=r.getSelectedCanvasIndex(),a=t;e<=t&&(a=t-1),r.props.updateContentState((function(t){t.canvasObjects=[].concat(Object(u.a)(t.canvasObjects.slice(0,e)),Object(u.a)(t.canvasObjects.slice(e+1))),t.canvasObjects=r.cleanCanvasObjects(t),t.keys.splice(e,1),t.selectedCanvas=a})),r.setState(Object(ie.b)((function(t){t.keys.splice(e,1)})))})),Object(p.a)(Object(o.a)(r),"reorderCanvas",(function(e){if(!(e.length<=1)){var t=e.findIndex((function(e){return r.getSelectedCanvasIndex()===e})),a=e.map((function(e){return r.props.content.canvasObjects[e]})),n=e.map((function(e){return r.state.keys[e]}));r.props.updateContentState({canvasObjects:a,keys:n,selectedCanvas:t}),r.setState({keys:n})}})),Object(p.a)(Object(o.a)(r),"setCurrentCanvasLoading",(function(e){r.setState({currentCanvasLoading:e})})),Object(p.a)(Object(o.a)(r),"selectCanvas",(function(e){r.saveCurrentCanvas(),r.props.updateContentState((function(t){t.canvasObjects[r.getSelectedCanvasIndex()]=r.bufferedCanvasContent,t.canvasObjects=r.cleanCanvasObjects(t),t.selectedCanvas=e})),r.bufferedCanvasContent=null})),Object(p.a)(Object(o.a)(r),"updateCanvasState",(function(e){r.bufferedCanvasContent=e})),Object(p.a)(Object(o.a)(r),"updateCanvasObjectCallback",(function(e){r.props.updateContentState((function(t){t.canvasObjects[r.getSelectedCanvasIndex()]=e,t.canvasObjects=r.cleanCanvasObjects(t)}))}));var l=0,d=[];return null===(s=(i=r.props).updateContentState)||void 0===s||s.call(i,(function(e){e.canvasObjects=r.cleanCanvasObjects(e)})),e.content.canvasObjects.map((function(e,t){return d[t]=l++})),r.state={keys:d,currentCanvasLoading:!1},r}return Object(i.a)(a,null,[{key:"getComponentDefault",value:function(){return{version:"1.0",width:600,height:400,canvasObjects:[k.default.getComponentDefault()]}}},{key:"getNewComponentDefault",value:function(){return{version:"2.0",width:600,height:400,canvasObjects:[k.default.getComponentDefault()],keys:[0],selectedCanvas:0}}}]),Object(i.a)(a,[{key:"shouldComponentUpdate",value:function(e){return"edit"===this.props.mode&&"view"===e.mode&&this.saveComponent(),!0}},{key:"componentWillUnmount",value:function(){this.saveComponent()}},{key:"addCanvasBase",value:function(e,t,a){var n,s=this,c=(n=this.state.keys)&&0!==n.length?Math.max.apply(Math,Object(u.a)(n))+1:0,o=this.getSelectedCanvasIndex();this.props.updateContentState((function(n){var i;s.bufferedCanvasContent&&(n.canvasObjects[o]=s.bufferedCanvasContent,n.canvasObjects=s.cleanCanvasObjects(n)),n.keys=null!==(i=n.keys)&&void 0!==i?i:[0],n.selectedCanvas=t?a+1:n.canvasObjects.length,n.keys.splice(n.selectedCanvas,0,c),n.canvasObjects.splice(n.selectedCanvas,0,e)})),this.bufferedCanvasContent=null,this.setState(Object(ie.b)((function(e){e.keys.splice(t?a:e.keys.length,0,c)})))}},{key:"addCanvasObject",value:function(e){this.saveCurrentCanvas(),this.addCanvasBase(e)}},{key:"getSelectedCanvasIndex",value:function(){return this.props.content.selectedCanvas?this.props.content.selectedCanvas:0}},{key:"cleanCanvasObjects",value:function(e){return null!==e&&void 0!==e&&e.canvasObjects?e.canvasObjects.map((function(e){return null!==e&&void 0!==e?e:k.default.getComponentDefault()})):k.default.getComponentDefault()}},{key:"saveComponent",value:function(){var e=this;"edit"===this.props.mode&&this.bufferedCanvasContent&&(this.saveCurrentCanvas(),this.props.updateContentState((function(t){t.canvasObjects[e.getSelectedCanvasIndex()]=e.bufferedCanvasContent,t.canvasObjects=e.cleanCanvasObjects(t)})),this.bufferedCanvasContent=null)}},{key:"saveCurrentCanvas",value:function(){var e,t;null===(e=this.canvasRef.current)||void 0===e||null===(t=e.saveComponent)||void 0===t||t.call(e)}},{key:"render",value:function(){var e="edit"!==this.props.mode,t=this.props,a=t.pageId,n=t.authorId,c=t.collectionId,o=t.isDraft,i=t.userId,r=t.shotId,l=t.editorPageId,d=t.config,p=void 0===d?{}:d,u={pageId:a,authorId:n,collectionId:c,userId:i,shotId:r,editorPageId:l};if(e)return Object(s.jsx)(oe,{content:this.props.content,selectedCanvasUpdatedTo:this.props.selectedCanvasUpdatedTo},"canvasViewer");var v,b=this.getSelectedCanvasIndex(),h=this.props.content.canvasObjects?this.props.content.canvasObjects[b]:null,j={pageId:a,authorId:n,collectionId:c,isDraft:o,userId:i,shotId:r,editorPageId:l},f=this.state.keys[b],O=de(de({},p),{},{canvasInAnimation:!0});return v=Object(s.jsx)(k.default,de({ref:this.canvasRef,mode:"edit",content:h,config:O,locationProps:j,onWidthChange:this.changeWidth,dispatch:this.props.dispatch,onHeightChange:this.changeHeight,updateContentState:this.updateCanvasState,updateCanvasObjectCallback:this.updateCanvasObjectCallback,isFullscreen:this.props.isFullscreen,setCanvasLoading:this.setCurrentCanvasLoading},u),f),Object(s.jsxs)(s.Fragment,{children:[this.state.currentCanvasLoading&&Object(s.jsx)("div",{className:"absolute inset-x-1.5 bottom-72",children:Object(s.jsx)(re.a,{size:60})}),Object(s.jsxs)(W,{is_loading:this.state.currentCanvasLoading,children:[Object(s.jsx)(ve,{canvasObjects:this.props.content.canvasObjects,keys:this.state.keys,selectedCanvas:b,reorderCanvas:this.reorderCanvas,selectCanvas:this.selectCanvas,removeCanvas:this.removeCanvas,duplicateCanvas:this.duplicateCanvas,addCanvas:this.addCanvas,isOneCanvas:1===this.props.content.canvasObjects.length}),Object(s.jsx)("div",{children:v}),!this.props.isFullscreen&&this.props.fullscreenIconToggle({onClick:this.props.toggleFullScreen,style:{position:"absolute",right:"25px",top:"20px"}})]})]})}}]),a}(b.a.Component);t.default=be}}]);
//# sourceMappingURL=455.d36b96f77c6815b27dd1.js.map